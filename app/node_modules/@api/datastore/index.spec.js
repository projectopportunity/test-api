/* eslint-env mocha */
'use strict'

const T = require('./index.js')
const CONNECTION_STRING = 'sqlite::memory:'

describe('the datastore module', () => {
  it('should export a function', () => {
    const expected = 'function'
    const actual = typeof T
    expect(actual).to.equal(expected)
  })

  describe('the instance returned by the function', () => {
    it('should always refer to the same instance', () => {
      const expected = T()
      const actual = T()
      expect(actual).to.equal(expected)
    })

    it('should have a property called "provider"', () => {
      const instance = T()
      expect(instance).to.have.property('provider')
    })

    describe('the "provider" property' , () =>{
      it ('should be read-only' , () => {
       expect( () => {
        const instance = T()
        instance.provider = 42 
       }).to.throw(/^Cannot set property provider/) 
      })
    })
  })
})
