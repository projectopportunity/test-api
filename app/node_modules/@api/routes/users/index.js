module.exports = (req, res, next) => {
  const validationErrorMessages = []

  const requiredFields = [
    'firstName',
    'lastName'
  ]

  requiredFields.forEach((field) => {
    if (
      /**
       * does the field exist?
       */
      !req.body[field] ||

      /**
       * is the value a string?
       */
      typeof req.body[field] !== 'string' ||

      /**
       * is it more than just white space?
       */
      req.body[field].trim().length === 0
    ) {
      validationErrorMessages.push(`missing required field ${field}`)
    }
  })

  if (validationErrorMessages.length > 0) {
    const err = new Error('')
    err.validationErrorMessages = validationErrorMessages
    throw err
  } else {
    res.location('/').status(201)
  }

  next()
}
